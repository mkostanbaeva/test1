Mediastorage это хранилище данных, которые растут экспоненциально и не подлежат удалению. В основе хранилища лежит Elliptics. Его особенности:
 * key-value сторадж,
 * поддерживает междатацентровую репликацию,
 * динамическое определение машин в сети. 

Но Elliptics можно использовать для сервиса в виде DHT стораджа, у которого нет роста данных. То есть, объем стораджа не меняется, а когда поступающие данные не требуют длительного хранения и могут регулярно удаляться через некоторое время.

Для решения проблем DHT была придумана альтернативная архитектура. Эллиптиксовая группа будет не один дата центр целиком, а всего один диск. Все группы не хранят реплики одних и тех же данных. Теперь не важно количество дата-центров. Группы объединяются в реплики-сеты. Когда придут данные на сохранение от пользователя, то клиент (http-proxy или сервис Cocaine) обратиться в Mastermind с вопросом в какой реплика-сет следует сохранить данные. Далее данные туда записываются, а пользователю будут возвращенена информация о реплике-сете. Такие реплика-сеты принято называть каплами. Капл может содержать несколько групп, например две или пять групп.  

Mastermind  - механизм позволяющий определять в какой капл следует записывать данные.  Особенности:
 * знает обо всех группах в кластере,
 * хранит информацию обо всех каплах (в каждой группе каждого капла есть специальный ключ, в этом ключе Mastermind пишет с какими другими группами данная группа находится в капле),
 * хранит информацию о неймспейсах.

Для администратора позволяет решить следующие проблемы связанные с:
 * добавлением новой группы,
 * восстановление реплики,
 * перенос группы на другую машину,
 * объединение групп в каплы и настройка капла,
 * объединение каплов в неймспейсы и настройки неймспейса.

Со стороны клиента:
 * балансировка нагрузки,
 * предоставление информации о структуре кластера.

Cocaine Worker занимается тем что ходит на каждую эллиптиксовую группу, собирает со всех машин статистику, записывает информацию в служебные ключи каждой группы с кем она закаплена, сохраняет информацию в служебные каплы какие неймспейсы есть и из каких каплов они состоят, посылает задания minion на выполнение тех или иных команд. 

Minion - питоновский демон, запущенный на каждой машине с эллиптиксовой группой, и он получает команды от cocaine worker и отправляет результаты. 

Libmastermind - интерфейс для клиента. Технически это библиотека которая общается с Mastermind, забирает от него ту информацию, которая может понадобиться клиенту и кэширует ее. 
